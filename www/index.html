<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="./styles/style.css">
  <title></title>
</head>

<body>
  <div id="main__layout">
    <aside>
      <menu>
        <label id="btnOpen" class="button button--primary">
          Subir imagen
          <input id="inputOpen" name="inputOpen" type="file" accepts="image/png,image/jpg,image/jpeg" multiple class="hidden" />
        </label>
        <label>
          O pegarla acÃ¡ >> <input id="inputOpen2" type="text" style="width:50px;" /> <<
        </label>
        <button id="btnExport">Exportar CSV</button>
      </menu>
    </aside>
    <main x-data class="main">
      <table id="table">
        <thead>
          <tr>
            <template x-for="header in $store.equipo.headers">
              <th x-text="header"></th>
            </template>
          </tr>
        </thead>
        <tbody>
          <template x-for="(pieza,j) in $store.equipo.equipo">
            <tr>
              <td><img :src="pieza[0]" width="50" @click="imageModal" :data-index="j" /></td>
              <template x-for="(col,i) in pieza">
                <template x-if="i>0">
                  <td x-text="pieza[i]" @input="pieza[i]=$event.target.innerText" contenteditable></td>
                </template>
              </template>
            </tr>
          </template>
        </tbody>
      </table>
    </main>
  </div>

  <dialog id="imageDialog" x-data>
    <form method="dialog">
      <img :src="$store.equipo.p && $store.equipo.equipo[$store.equipo.p][0]" height="200">
      <table id="table">
        <tbody>
          <template x-for="(col,i) in $store.equipo.equipo[$store.equipo.p]">
            <template x-if="i>0">
              <tr> 
                <th x-text="$store.equipo.headers[i]"></th>
                <td x-text="col" @input="$store.equipo.equipo[$store.equipo.p][i]=$event.target.innerText" contenteditable></td>
              </tr>
            </template>
          </template>
        </tbody>
      </table>
      <button autofocus>Close</button>
    </form>
  </dialog>

  <script src="./src/main.js" type="module" defer></script>
</body>

</html>